### 反悔栈

#### 题目描述

现在，你需要实现一个栈，支持以下的操作:

1. 插入一个元素。
2. 弹出一个元素。
3. 反悔。重新插入最后一次被弹出且没有被重新插入(反悔)的元素。

其中，元素是正整数；我们允许连续反悔多次。

#### 输入格式

第一行输入一个正整数 $n$，表示操作的次数。

接下来 $n$ 行，每行输入一个操作，操作有以下三种：

- $1~~x$ 表示插入一个元素 $x$。
- $2$ 表示弹出一个元素，并且输出。
- $3$ 表示一次返回操作。
- $4$ 按照最早到最晚入栈顺序，输出栈中的元素。

保证 $n \le 1 \times 10^5$ 。保证元素在 `int` 范围内，且保证所有操作合法。保证输出元素总数不超过 $1 \times 10^6$

#### 输出格式

对于每次操作 $2$，输出弹出的元素，独立一行。

对于每次操作 $4$，输出栈中的元素，一个空格隔开，且独立一行。

#### 样例输入

```
12
1 1
1 2
1 3
1 4
2
2
3
2
1 5
3
3
4
```

#### 样例输出

```
4
3
3
1 2 5 3 4 
```
